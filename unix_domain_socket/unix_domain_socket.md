# UNIXドメインソケット


## 概要
----------------------------------------
- 同一ホスト内のプロセス間通信を実現する。

### 通信ドメイン
|ドメイン|通信の実現|APL間の通信|アドレス形式|アドレス構造体|
|:---|:---|:---|:---|:---|
|AF_UNIX|カーネル内|同一ホスト内|パス名|sockaddr_um|
|AF_INET|IPv4経由|IPv4ネットワーク上の他ホスト|32ビットのIPv4アドレス＋16ビットのポート番号|sockaddr_in|
|AF_INET6|IPv6経由|IPv6ネットワーク上の他ホスト|128ビットのIPv6アドレス＋16ビットのポート番号|sockaddr_in6|

### ソケット種類
|ソケット種類|配信の信頼性|メッセージ区切りの維持|コネクション指向|インターネットドメインでのプロトコル|
|:---|:---|:---|:---|:---|
|ストリーム|○|×|○ (2つのソケットが接続した状態で動作)|TCP (Transmission Control Protocol)|
|データグラム|×|○|× (他のソケットに接続せず使用)|UDP (User Datagrap Protocol)|


## ストリームソケット
----------------------------------------
### パッシブソケット (サーバ)
- ソケットの作成 (socket())
- ソケットのバインド (bind())
- 接続要求の受付 (listen())
- コネクションの受付 (accept())
- (クライアントがconnect()するまでブロック)
- 読み出し (read() / recv())
- 書き込み (write() /send())
- コネクションの終了 (close())

### アクティブソケット (クライアント)
- ソケットの作成 (socket())
- ピアソケット (パッシブソケット) への接続 (connect())
- 書き込み (write() /send())
- 読み出し (read() / recv())
- コネクションの終了 (close())


## データグラムソケット
----------------------------------------
### サーバ
- ソケットの作成 (socket())
- ソケットのバインド (bind())
- データグラムの受信 (recvfrom())
- データグラムの送信 (sendto())
- コネクションの終了 (close())

### クライアント
- ソケットの作成 (socket())
- データグラムの送信 (sendto())
- データグラムの受信 (recvfrom())
- コネクションの終了 (close())


## 参考文献
----------------------------------------
- Linuxプログラミングインタフェース (Michael Kerrisk)
